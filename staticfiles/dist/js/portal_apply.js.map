{
  "version": 3,
  "sources": ["../../js/portal_apply.js"],
  "sourcesContent": ["/*\r\nClient Portal: Artist Apply page enhancements\r\n- File selection preview (names, sizes)\r\n- Basic client-side validation hints (non-blocking; server remains source of truth)\r\n- Accessibility: announce selected files and errors politely\r\nNo backend behavior changes.\r\n*/\r\n(function () {\r\n  const byId = (id) => document.getElementById(id);\r\n  const certificates = byId('certificates');\r\n  const preview = byId('file-preview');\r\n  const hp = byId('website'); // honeypot \u2014 we do not submit this\r\n\r\n  function formatBytes(bytes) {\r\n    if (!bytes && bytes !== 0) return '';\r\n    const units = ['B', 'KB', 'MB', 'GB'];\r\n    let i = 0, v = bytes;\r\n    while (v >= 1024 && i < units.length - 1) { v /= 1024; i++; }\r\n    return `${v.toFixed(1)} ${units[i]}`;\r\n  }\r\n\r\n  function announce(msg) {\r\n    try {\r\n      let live = document.getElementById('aria-live');\r\n      if (!live) {\r\n        live = document.createElement('div');\r\n        live.id = 'aria-live';\r\n        live.setAttribute('aria-live', 'polite');\r\n        live.className = 'sr-only';\r\n        document.body.appendChild(live);\r\n      }\r\n      live.textContent = msg;\r\n    } catch (_) {}\r\n  }\r\n\r\n  function renderPreview(files) {\r\n    if (!preview) return;\r\n    preview.innerHTML = '';\r\n    const maxPerFile = 10 * 1024 * 1024; // 10MB\r\n    const allowed = ['pdf', 'png', 'jpg', 'jpeg', 'webp'];\r\n    const list = document.createDocumentFragment();\r\n    Array.from(files || []).forEach((f) => {\r\n      const li = document.createElement('li');\r\n      const name = f.name || 'file';\r\n      const ext = (name.split('.').pop() || '').toLowerCase();\r\n      const tooBig = typeof f.size === 'number' && f.size > maxPerFile;\r\n      const badExt = allowed.indexOf(ext) === -1;\r\n      li.textContent = `${name} \u2014 ${formatBytes(f.size || 0)}`;\r\n      if (tooBig || badExt) {\r\n        li.className = 'text-red-600';\r\n        const why = [];\r\n        if (badExt) why.push(`type .${ext} not allowed`);\r\n        if (tooBig) why.push('exceeds 10MB');\r\n        const small = document.createElement('small');\r\n        small.className = 'ml-2';\r\n        small.textContent = `(${why.join(', ')})`;\r\n        li.appendChild(small);\r\n      } else {\r\n        li.className = 'text-emerald-700 dark:text-emerald-400';\r\n      }\r\n      list.appendChild(li);\r\n    });\r\n    preview.appendChild(list);\r\n    announce(`${(files && files.length) || 0} file(s) selected`);\r\n  }\r\n\r\n  function blockBots() {\r\n    try {\r\n      if (!hp) return;\r\n      // If a bot fills the honeypot, warn user visually (non-blocking)\r\n      hp.addEventListener('input', function () {\r\n        this.setAttribute('aria-invalid', 'true');\r\n        this.style.outline = '2px solid #ef4444';\r\n      });\r\n    } catch (_) {}\r\n  }\r\n\r\n  function init() {\r\n    if (certificates) {\r\n      certificates.addEventListener('change', function () {\r\n        renderPreview(this.files);\r\n      });\r\n    }\r\n    blockBots();\r\n  }\r\n\r\n  if (document.readyState === 'loading') {\r\n    document.addEventListener('DOMContentLoaded', init);\r\n  } else {\r\n    init();\r\n  }\r\n})();\r\n"],
  "mappings": "OAOC,UAAY,CACX,IAAMA,EAAQC,GAAO,SAAS,eAAeA,CAAE,EACzCC,EAAeF,EAAK,cAAc,EAClCG,EAAUH,EAAK,cAAc,EAC7BI,EAAKJ,EAAK,SAAS,EAEzB,SAASK,EAAYC,EAAO,CAC1B,GAAI,CAACA,GAASA,IAAU,EAAG,MAAO,GAClC,IAAMC,EAAQ,CAAC,IAAK,KAAM,KAAM,IAAI,EAChC,EAAI,EAAGC,EAAIF,EACf,KAAOE,GAAK,MAAQ,EAAID,EAAM,OAAS,GAAKC,GAAK,KAAM,IACvD,MAAO,GAAGA,EAAE,QAAQ,CAAC,CAAC,IAAID,EAAM,CAAC,CAAC,EACpC,CAEA,SAASE,EAASC,EAAK,CACrB,GAAI,CACF,IAAIC,EAAO,SAAS,eAAe,WAAW,EACzCA,IACHA,EAAO,SAAS,cAAc,KAAK,EACnCA,EAAK,GAAK,YACVA,EAAK,aAAa,YAAa,QAAQ,EACvCA,EAAK,UAAY,UACjB,SAAS,KAAK,YAAYA,CAAI,GAEhCA,EAAK,YAAcD,CACrB,MAAY,CAAC,CACf,CAEA,SAASE,EAAcC,EAAO,CAC5B,GAAI,CAACV,EAAS,OACdA,EAAQ,UAAY,GACpB,IAAMW,EAAa,GAAK,KAAO,KACzBC,EAAU,CAAC,MAAO,MAAO,MAAO,OAAQ,MAAM,EAC9CC,EAAO,SAAS,uBAAuB,EAC7C,MAAM,KAAKH,GAAS,CAAC,CAAC,EAAE,QAASI,GAAM,CACrC,IAAMC,EAAK,SAAS,cAAc,IAAI,EAChCC,EAAOF,EAAE,MAAQ,OACjBG,GAAOD,EAAK,MAAM,GAAG,EAAE,IAAI,GAAK,IAAI,YAAY,EAChDE,EAAS,OAAOJ,EAAE,MAAS,UAAYA,EAAE,KAAOH,EAChDQ,EAASP,EAAQ,QAAQK,CAAG,IAAM,GAExC,GADAF,EAAG,YAAc,GAAGC,CAAI,WAAMd,EAAYY,EAAE,MAAQ,CAAC,CAAC,GAClDI,GAAUC,EAAQ,CACpBJ,EAAG,UAAY,eACf,IAAMK,EAAM,CAAC,EACTD,GAAQC,EAAI,KAAK,SAASH,CAAG,cAAc,EAC3CC,GAAQE,EAAI,KAAK,cAAc,EACnC,IAAMC,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,UAAY,OAClBA,EAAM,YAAc,IAAID,EAAI,KAAK,IAAI,CAAC,IACtCL,EAAG,YAAYM,CAAK,CACtB,MACEN,EAAG,UAAY,yCAEjBF,EAAK,YAAYE,CAAE,CACrB,CAAC,EACDf,EAAQ,YAAYa,CAAI,EACxBP,EAAS,GAAII,GAASA,EAAM,QAAW,CAAC,mBAAmB,CAC7D,CAEA,SAASY,GAAY,CACnB,GAAI,CACF,GAAI,CAACrB,EAAI,OAETA,EAAG,iBAAiB,QAAS,UAAY,CACvC,KAAK,aAAa,eAAgB,MAAM,EACxC,KAAK,MAAM,QAAU,mBACvB,CAAC,CACH,MAAY,CAAC,CACf,CAEA,SAASsB,GAAO,CACVxB,GACFA,EAAa,iBAAiB,SAAU,UAAY,CAClDU,EAAc,KAAK,KAAK,CAC1B,CAAC,EAEHa,EAAU,CACZ,CAEI,SAAS,aAAe,UAC1B,SAAS,iBAAiB,mBAAoBC,CAAI,EAElDA,EAAK,CAET,GAAG",
  "names": ["byId", "id", "certificates", "preview", "hp", "formatBytes", "bytes", "units", "v", "announce", "msg", "live", "renderPreview", "files", "maxPerFile", "allowed", "list", "f", "li", "name", "ext", "tooBig", "badExt", "why", "small", "blockBots", "init"]
}
