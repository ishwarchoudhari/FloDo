(()=>{function c(e){let t=null;if(document.cookie&&document.cookie!==""){let o=document.cookie.split(";");for(let n=0;n<o.length;n++){let i=o[n].trim();if(i.substring(0,e.length+1)===e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}}return t}function v(e){let t=document.getElementById(e);t&&t.classList.toggle("hidden")}var m=[],l=!1;function T(){let e=document.getElementById("toastContainer");return e||(e=document.createElement("div"),e.id="toastContainer",e.className="fixed top-4 left-0 right-0 z-50 flex justify-center items-start pointer-events-none",document.body.appendChild(e)),e}function C(e,t,o){let n="bg-blue-600",i="\u2139\uFE0F";t==="success"&&(n="bg-green-600",i="\u2714\uFE0F"),t==="error"&&(n="bg-red-600",i="\u26A0\uFE0F");let s=document.createElement("div");s.className="pointer-events-auto";let r=document.createElement("div");r.setAttribute("role","status"),r.setAttribute("aria-live","polite"),r.className=`${n} text-white px-4 py-3 rounded shadow-lg max-w-sm w-[min(92vw,28rem)]`,r.innerHTML=`
    <div class="flex items-start gap-2">
      <span class="text-lg leading-none">${i}</span>
      <div class="flex-1">
        <div class="font-medium">${e}</div>
        ${o?`<div class="opacity-90 text-sm mt-0.5">${o}</div>`:""}
      </div>
    </div>`,s.style.transition="transform 220ms ease, opacity 220ms ease",s.style.transform="translateY(-10px)",s.style.opacity="0",T().appendChild(s),s.appendChild(r),requestAnimationFrame(()=>{s.style.transform="translateY(0)",s.style.opacity="1"});let y=setTimeout(()=>f(s),3e3);s.addEventListener("click",()=>{clearTimeout(y),f(s)})}function f(e){e.style.transform="translateY(-10px)",e.style.opacity="0",setTimeout(()=>{e.remove(),l=!1,h()},220)}function h(){if(l)return;let e=m.shift();e&&(l=!0,C(e.message,e.type,e.details))}function b(e,t="info",o=""){m.push({message:e,type:t,details:o}),h()}window.getCookie=c;window.toggleDropdown=v;window.showNotification=b;var d=0,a=null;function g(){let e=document.getElementById("globalProgressBar");return e||(e=document.createElement("div"),e.id="globalProgressBar",e.className="fixed top-0 left-0 h-0.5 bg-blue-600 dark:bg-blue-400 z-[60] transition-[width,opacity] duration-300 ease-out",e.style.width="0%",e.style.opacity="0",document.body.appendChild(e)),e}function w(){let e=g();d++,d===1&&(e.style.opacity="1",e.style.width="0%",requestAnimationFrame(()=>{e.style.width="80%"}),a&&clearTimeout(a),a=setTimeout(()=>{e.style.width="90%"},4e3))}function p(){let e=g();d=Math.max(0,d-1),d===0&&(a&&(clearTimeout(a),a=null),e.style.width="100%",setTimeout(()=>{e.style.opacity="0"},200),setTimeout(()=>{e.style.width="0%"},600))}async function _(e){try{return w(),await e}finally{p()}}window.startLoading=w;window.stopLoading=p;window.withLoading=_;document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("logoutForm");e&&e.addEventListener("submit",async t=>{t.preventDefault();try{let n=await(await fetch(e.getAttribute("action")||"/logout/",{method:"POST",headers:{"X-CSRFToken":c("csrftoken")}})).json();window.location.href=n&&n.redirect?n.redirect:"/login/"}catch{window.location.href="/login/"}})});function u(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t="";for(let o=0;o<5;o++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function k(){try{return JSON.parse(localStorage.getItem("uidMap")||"{}")}catch{return{}}}function S(e){try{localStorage.setItem("uidMap",JSON.stringify(e))}catch{}}function E(e){let t=k();if(t[e])return t[e];let o=u(),n=new Set(Object.values(t));for(;n.has(o);)o=u();return t[e]=o,S(t),o}window.generateUniqueID=u;window.getPersistentUID=E;async function R(e,t){t=t||{};let o=(t.method||"GET").toUpperCase(),n=o==="GET"||o==="HEAD"||o==="OPTIONS"||o==="TRACE",i=typeof e=="string"?e:e&&e.url||"";return(!/^https?:\/\//i.test(i)||i.indexOf(location.origin)===0)&&!n&&(t.headers=t.headers||{},t.headers instanceof Headers?(t.headers.has("X-CSRFToken")||t.headers.set("X-CSRFToken",c("csrftoken")),t.headers.has("X-Requested-With")||t.headers.set("X-Requested-With","XMLHttpRequest")):(t.headers["X-CSRFToken"]||(t.headers["X-CSRFToken"]=c("csrftoken")),t.headers["X-Requested-With"]||(t.headers["X-Requested-With"]="XMLHttpRequest")),t.credentials=t.credentials||"same-origin"),fetch(e,t)}window.fetchWithCSRF=R;})();
//# sourceMappingURL=common.js.map
