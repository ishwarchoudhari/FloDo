{
  "version": 3,
  "sources": ["../../js/auth_signup.js"],
  "sourcesContent": ["// static/js/auth_signup.js\n// Handles the signup form submission with basic client validation.\n(function(){\n  // Discover important URLs from meta tags to avoid inline scripts\n  try {\n    if (!window.__loginUrl) {\n      var meta = document.getElementById('auth-urls');\n      if (meta) { window.__loginUrl = meta.getAttribute('data-login-url') || window.__loginUrl; }\n    }\n  } catch(_){}\n  function isValidEmail(email){\n    try { return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(String(email).toLowerCase()); } catch(_) { return false; }\n  }\n  function onSubmit(e){\n    e.preventDefault();\n    var form = e.target;\n    var msg = document.getElementById('signupMsg');\n    if (msg) { msg.className = 'mt-3 text-sm'; msg.textContent = ''; }\n\n    var data = new FormData(form);\n    var username = (data.get('username')||'').toString().trim();\n    var email = (data.get('email')||'').toString().trim();\n    var pw = (data.get('password')||'').toString();\n    var pwc = (data.get('password_confirm')||'').toString();\n\n    if (!username || !email || !pw || !pwc){\n      if (msg) { msg.className = 'mt-3 text-sm text-red-700 dark:text-red-400'; msg.textContent = 'Please fill in all fields.'; }\n      return;\n    }\n    if (!isValidEmail(email)){\n      if (msg) { msg.className = 'mt-3 text-sm text-red-700 dark:text-red-400'; msg.textContent = 'Please enter a valid email address.'; }\n      return;\n    }\n    if (pw !== pwc){\n      if (msg) { msg.className = 'mt-3 text-sm text-red-700 dark:text-red-400'; msg.textContent = 'Passwords do not match.'; }\n      return;\n    }\n    var p = (typeof window.signupUser === 'function') ? window.signupUser(data) : Promise.resolve({ success:false, error:'signupUser() not available'});\n    p.then(function(res){\n      if (res && res.success){\n        if (msg) { msg.className = 'mt-3 text-sm text-green-700 dark:text-green-400'; msg.textContent = 'Account created. Please sign in.'; }\n        try { window.location.href = (window.__loginUrl || '/auth/login/'); } catch(_) {}\n      } else {\n        var err = (res && (res.error || (res.errors && JSON.stringify(res.errors)))) || 'Signup failed';\n        if (msg) { msg.className = 'mt-3 text-sm text-red-700 dark:text-red-400'; msg.textContent = err; }\n      }\n    }).catch(function(){ if (msg) { msg.className = 'mt-3 text-sm text-red-700 dark:text-red-400'; msg.textContent = 'Network error'; } });\n  }\n\n  function init(){\n    var form = document.getElementById('signupForm');\n    if (form && !form.__bound){ form.addEventListener('submit', onSubmit); form.__bound = true; }\n  }\n\n  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', init); else init();\n})();\n"],
  "mappings": "OAEC,UAAU,CAET,GAAI,CACF,GAAI,CAAC,OAAO,WAAY,CACtB,IAAIA,EAAO,SAAS,eAAe,WAAW,EAC1CA,IAAQ,OAAO,WAAaA,EAAK,aAAa,gBAAgB,GAAK,OAAO,WAChF,CACF,MAAU,CAAC,CACX,SAASC,EAAaC,EAAM,CAC1B,GAAI,CAAE,MAAO,6BAA6B,KAAK,OAAOA,CAAK,EAAE,YAAY,CAAC,CAAG,MAAW,CAAE,MAAO,EAAO,CAC1G,CACA,SAASC,EAAS,EAAE,CAClB,EAAE,eAAe,EACjB,IAAIC,EAAO,EAAE,OACTC,EAAM,SAAS,eAAe,WAAW,EACzCA,IAAOA,EAAI,UAAY,eAAgBA,EAAI,YAAc,IAE7D,IAAIC,EAAO,IAAI,SAASF,CAAI,EACxBG,GAAYD,EAAK,IAAI,UAAU,GAAG,IAAI,SAAS,EAAE,KAAK,EACtDJ,GAASI,EAAK,IAAI,OAAO,GAAG,IAAI,SAAS,EAAE,KAAK,EAChDE,GAAMF,EAAK,IAAI,UAAU,GAAG,IAAI,SAAS,EACzCG,GAAOH,EAAK,IAAI,kBAAkB,GAAG,IAAI,SAAS,EAEtD,GAAI,CAACC,GAAY,CAACL,GAAS,CAACM,GAAM,CAACC,EAAI,CACjCJ,IAAOA,EAAI,UAAY,8CAA+CA,EAAI,YAAc,8BAC5F,MACF,CACA,GAAI,CAACJ,EAAaC,CAAK,EAAE,CACnBG,IAAOA,EAAI,UAAY,8CAA+CA,EAAI,YAAc,uCAC5F,MACF,CACA,GAAIG,IAAOC,EAAI,CACTJ,IAAOA,EAAI,UAAY,8CAA+CA,EAAI,YAAc,2BAC5F,MACF,CACA,IAAIK,EAAK,OAAO,OAAO,YAAe,WAAc,OAAO,WAAWJ,CAAI,EAAI,QAAQ,QAAQ,CAAE,QAAQ,GAAO,MAAM,4BAA4B,CAAC,EAClJI,EAAE,KAAK,SAASC,EAAI,CAClB,GAAIA,GAAOA,EAAI,QAAQ,CACjBN,IAAOA,EAAI,UAAY,kDAAmDA,EAAI,YAAc,oCAChG,GAAI,CAAE,OAAO,SAAS,KAAQ,OAAO,YAAc,cAAiB,MAAW,CAAC,CAClF,KAAO,CACL,IAAIO,EAAOD,IAAQA,EAAI,OAAUA,EAAI,QAAU,KAAK,UAAUA,EAAI,MAAM,IAAQ,gBAC5EN,IAAOA,EAAI,UAAY,8CAA+CA,EAAI,YAAcO,EAC9F,CACF,CAAC,EAAE,MAAM,UAAU,CAAMP,IAAOA,EAAI,UAAY,8CAA+CA,EAAI,YAAc,gBAAmB,CAAC,CACvI,CAEA,SAASQ,GAAM,CACb,IAAIT,EAAO,SAAS,eAAe,YAAY,EAC3CA,GAAQ,CAACA,EAAK,UAAUA,EAAK,iBAAiB,SAAUD,CAAQ,EAAGC,EAAK,QAAU,GACxF,CAEI,SAAS,aAAe,UAAW,SAAS,iBAAiB,mBAAoBS,CAAI,EAAQA,EAAK,CACxG,GAAG",
  "names": ["meta", "isValidEmail", "email", "onSubmit", "form", "msg", "data", "username", "pw", "pwc", "p", "res", "err", "init"]
}
