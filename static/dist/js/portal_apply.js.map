{
  "version": 3,
  "sources": ["../../js/portal_apply.js"],
  "sourcesContent": ["/*\nClient Portal: Artist Apply page enhancements\n- File selection preview (names, sizes)\n- Basic client-side validation hints (non-blocking; server remains source of truth)\n- Accessibility: announce selected files and errors politely\nNo backend behavior changes.\n*/\n(function () {\n  const byId = (id) => document.getElementById(id);\n  const certificates = byId('certificates');\n  const preview = byId('file-preview');\n  const hp = byId('website'); // honeypot \u2014 we do not submit this\n\n  function formatBytes(bytes) {\n    if (!bytes && bytes !== 0) return '';\n    const units = ['B', 'KB', 'MB', 'GB'];\n    let i = 0, v = bytes;\n    while (v >= 1024 && i < units.length - 1) { v /= 1024; i++; }\n    return `${v.toFixed(1)} ${units[i]}`;\n  }\n\n  function announce(msg) {\n    try {\n      let live = document.getElementById('aria-live');\n      if (!live) {\n        live = document.createElement('div');\n        live.id = 'aria-live';\n        live.setAttribute('aria-live', 'polite');\n        live.className = 'sr-only';\n        document.body.appendChild(live);\n      }\n      live.textContent = msg;\n    } catch (_) {}\n  }\n\n  function renderPreview(files) {\n    if (!preview) return;\n    preview.innerHTML = '';\n    const maxPerFile = 10 * 1024 * 1024; // 10MB\n    const allowed = ['pdf', 'png', 'jpg', 'jpeg', 'webp'];\n    const list = document.createDocumentFragment();\n    Array.from(files || []).forEach((f) => {\n      const li = document.createElement('li');\n      const name = f.name || 'file';\n      const ext = (name.split('.').pop() || '').toLowerCase();\n      const tooBig = typeof f.size === 'number' && f.size > maxPerFile;\n      const badExt = allowed.indexOf(ext) === -1;\n      li.textContent = `${name} \u2014 ${formatBytes(f.size || 0)}`;\n      if (tooBig || badExt) {\n        li.className = 'text-red-600';\n        const why = [];\n        if (badExt) why.push(`type .${ext} not allowed`);\n        if (tooBig) why.push('exceeds 10MB');\n        const small = document.createElement('small');\n        small.className = 'ml-2';\n        small.textContent = `(${why.join(', ')})`;\n        li.appendChild(small);\n      } else {\n        li.className = 'text-emerald-700 dark:text-emerald-400';\n      }\n      list.appendChild(li);\n    });\n    preview.appendChild(list);\n    announce(`${(files && files.length) || 0} file(s) selected`);\n  }\n\n  function blockBots() {\n    try {\n      if (!hp) return;\n      // If a bot fills the honeypot, warn user visually (non-blocking)\n      hp.addEventListener('input', function () {\n        this.setAttribute('aria-invalid', 'true');\n        this.style.outline = '2px solid #ef4444';\n      });\n    } catch (_) {}\n  }\n\n  function init() {\n    if (certificates) {\n      certificates.addEventListener('change', function () {\n        renderPreview(this.files);\n      });\n    }\n    blockBots();\n  }\n\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', init);\n  } else {\n    init();\n  }\n})();\n"],
  "mappings": "OAOC,UAAY,CACX,IAAMA,EAAQC,GAAO,SAAS,eAAeA,CAAE,EACzCC,EAAeF,EAAK,cAAc,EAClCG,EAAUH,EAAK,cAAc,EAC7BI,EAAKJ,EAAK,SAAS,EAEzB,SAASK,EAAYC,EAAO,CAC1B,GAAI,CAACA,GAASA,IAAU,EAAG,MAAO,GAClC,IAAMC,EAAQ,CAAC,IAAK,KAAM,KAAM,IAAI,EAChC,EAAI,EAAGC,EAAIF,EACf,KAAOE,GAAK,MAAQ,EAAID,EAAM,OAAS,GAAKC,GAAK,KAAM,IACvD,MAAO,GAAGA,EAAE,QAAQ,CAAC,CAAC,IAAID,EAAM,CAAC,CAAC,EACpC,CAEA,SAASE,EAASC,EAAK,CACrB,GAAI,CACF,IAAIC,EAAO,SAAS,eAAe,WAAW,EACzCA,IACHA,EAAO,SAAS,cAAc,KAAK,EACnCA,EAAK,GAAK,YACVA,EAAK,aAAa,YAAa,QAAQ,EACvCA,EAAK,UAAY,UACjB,SAAS,KAAK,YAAYA,CAAI,GAEhCA,EAAK,YAAcD,CACrB,MAAY,CAAC,CACf,CAEA,SAASE,EAAcC,EAAO,CAC5B,GAAI,CAACV,EAAS,OACdA,EAAQ,UAAY,GACpB,IAAMW,EAAa,GAAK,KAAO,KACzBC,EAAU,CAAC,MAAO,MAAO,MAAO,OAAQ,MAAM,EAC9CC,EAAO,SAAS,uBAAuB,EAC7C,MAAM,KAAKH,GAAS,CAAC,CAAC,EAAE,QAASI,GAAM,CACrC,IAAMC,EAAK,SAAS,cAAc,IAAI,EAChCC,EAAOF,EAAE,MAAQ,OACjBG,GAAOD,EAAK,MAAM,GAAG,EAAE,IAAI,GAAK,IAAI,YAAY,EAChDE,EAAS,OAAOJ,EAAE,MAAS,UAAYA,EAAE,KAAOH,EAChDQ,EAASP,EAAQ,QAAQK,CAAG,IAAM,GAExC,GADAF,EAAG,YAAc,GAAGC,CAAI,WAAMd,EAAYY,EAAE,MAAQ,CAAC,CAAC,GAClDI,GAAUC,EAAQ,CACpBJ,EAAG,UAAY,eACf,IAAMK,EAAM,CAAC,EACTD,GAAQC,EAAI,KAAK,SAASH,CAAG,cAAc,EAC3CC,GAAQE,EAAI,KAAK,cAAc,EACnC,IAAMC,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,UAAY,OAClBA,EAAM,YAAc,IAAID,EAAI,KAAK,IAAI,CAAC,IACtCL,EAAG,YAAYM,CAAK,CACtB,MACEN,EAAG,UAAY,yCAEjBF,EAAK,YAAYE,CAAE,CACrB,CAAC,EACDf,EAAQ,YAAYa,CAAI,EACxBP,EAAS,GAAII,GAASA,EAAM,QAAW,CAAC,mBAAmB,CAC7D,CAEA,SAASY,GAAY,CACnB,GAAI,CACF,GAAI,CAACrB,EAAI,OAETA,EAAG,iBAAiB,QAAS,UAAY,CACvC,KAAK,aAAa,eAAgB,MAAM,EACxC,KAAK,MAAM,QAAU,mBACvB,CAAC,CACH,MAAY,CAAC,CACf,CAEA,SAASsB,GAAO,CACVxB,GACFA,EAAa,iBAAiB,SAAU,UAAY,CAClDU,EAAc,KAAK,KAAK,CAC1B,CAAC,EAEHa,EAAU,CACZ,CAEI,SAAS,aAAe,UAC1B,SAAS,iBAAiB,mBAAoBC,CAAI,EAElDA,EAAK,CAET,GAAG",
  "names": ["byId", "id", "certificates", "preview", "hp", "formatBytes", "bytes", "units", "v", "announce", "msg", "live", "renderPreview", "files", "maxPerFile", "allowed", "list", "f", "li", "name", "ext", "tooBig", "badExt", "why", "small", "blockBots", "init"]
}
