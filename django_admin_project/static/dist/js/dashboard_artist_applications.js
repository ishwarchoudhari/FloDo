(()=>{(()=>{function C(e){if(!e)return;let n=window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(e.classList.remove("hidden"),n){e.style.maxHeight="",e.style.overflow="",e.style.transition="";return}e.style.overflow="hidden",e.style.maxHeight="0px",e.offsetHeight;let r=e.scrollHeight;e.style.transition="max-height 300ms ease",e.style.maxHeight=r+"px";function s(){e.style.maxHeight="",e.style.overflow="",e.style.transition="",e.removeEventListener("transitionend",s)}e.addEventListener("transitionend",s)}function x(e){if(!e)return;if(window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches){e.classList.add("hidden"),e.style.maxHeight="",e.style.overflow="",e.style.transition="";return}let r=e.scrollHeight;e.style.overflow="hidden",e.style.maxHeight=r+"px",e.offsetHeight,e.style.transition="max-height 300ms ease",e.style.maxHeight="0px";function s(){e.classList.add("hidden"),e.style.maxHeight="",e.style.overflow="",e.style.transition="",e.removeEventListener("transitionend",s)}e.addEventListener("transitionend",s)}function S(e,n){return new Promise(function(r){try{let c=function(){try{a.remove()}catch{}};var s=c;let t=e&&e.appendChild?e:document.body,a=document.createElement("div");a.className="fixed inset-0 z-[70] flex items-center justify-center p-4",a.setAttribute("data-confirm","");let o=document.createElement("div");o.className="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 shadow-xl rounded-xl max-w-sm w-full p-4",o.innerHTML='<div class="text-sm text-gray-800 dark:text-gray-100 mb-3">'+n+"</div>";let i=document.createElement("div");i.className="flex justify-end gap-2";let u=document.createElement("button");u.className="px-3 py-1.5 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-200",u.textContent="Cancel";let l=document.createElement("button");l.className="px-3 py-1.5 rounded-lg bg-blue-600 text-white hover:bg-blue-700",l.textContent="Confirm",i.appendChild(u),i.appendChild(l),o.appendChild(i),a.appendChild(o),t.appendChild(a),u.addEventListener("click",function(){c(),r(!1)}),l.addEventListener("click",function(){c(),r(!0)}),a.addEventListener("click",function(m){m.target===a&&(c(),r(!1))})}catch{r(confirm(n))}})}function L(e,n,r){try{let t=(r&&r.querySelector?r:document.body).querySelector("#toast-root");t||(t=document.createElement("div"),t.id="toast-root",t.className="fixed top-3 left-1/2 -translate-x-1/2 z-[60] space-y-2 pointer-events-none",t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),(r&&r.appendChild?r:document.body).appendChild(t));let a=document.createElement("div");a.className="pointer-events-auto px-4 py-2 rounded-lg border shadow-sm text-sm "+(n==="error"?"bg-red-50 text-red-700 border-red-200":"bg-emerald-50 text-emerald-700 border-emerald-200"),a.textContent=e,t.appendChild(a),setTimeout(()=>{try{a.style.opacity="0",a.style.transition="opacity 200ms"}catch{}},1800),setTimeout(()=>{try{a.remove(),t&&!t.children.length&&t.remove()}catch{}},2100)}catch{}}function y(e,n){let r=`[data-details-footer="${e}"]`;document.querySelectorAll(r).forEach(t=>{n?t.classList.remove("hidden"):t.classList.add("hidden")});let s=`[data-details-actions="${e}"]`;document.querySelectorAll(s).forEach(t=>{n?t.classList.remove("hidden"):t.classList.add("hidden")})}function A(e){document.querySelectorAll('[id^="details-"]').forEach(n=>{if(n.id!==e&&!n.classList.contains("hidden")){x(n),y(n.id,!1);let r=document.querySelector(`[data-toggle="${n.id}"]`);r&&r.setAttribute("aria-expanded","false");let s=r&&r.querySelector("svg");s&&(s.style.transform="rotate(0deg)")}})}function g(e){try{let n=e.querySelector("[data-modal-overlay]")||e,r=Array.prototype.slice.call(n.querySelectorAll("img")),s=Array.prototype.slice.call(n.querySelectorAll("a[href]"));return r.length?r:s}catch{return[]}}function h(e,n){try{let r=g(e);if(!r.length)return;let s="ring-2 ring-blue-400 dark:ring-blue-300 rounded-md";r.forEach((a,o)=>{if(a.classList.remove("ring-2","ring-blue-400","dark:ring-blue-300","rounded-md"),o===n){try{a.style.willChange="transform, opacity"}catch{}a.tagName==="IMG"&&!a.complete?a.addEventListener("load",function i(){a.classList.add("ring-2","ring-blue-400","dark:ring-blue-300","rounded-md"),a.removeEventListener("load",i)},{once:!0}):a.classList.add("ring-2","ring-blue-400","dark:ring-blue-300","rounded-md")}});let t=r[n];t&&t.scrollIntoView&&t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}),e._certIndex=n}catch{}}function p(e,n){let r=g(e);if(!r.length)return;let s=typeof e._certIndex=="number"?e._certIndex:0;s=(s+n+r.length)%r.length,h(e,s)}function q(e){e.classList.remove("hidden"),e.classList.add("flex"),document.body.classList.add("overflow-hidden");try{let i=function(){g(e).forEach(f=>{try{f.style.transformOrigin="center center",f.style.transform=`scale(${o})`}catch{}})};var n=i;let r=g(e);r.length&&(h(e,0),r.forEach((d,f)=>{d.addEventListener("click",function(){h(e,f)})}));let s=function(d){d.key==="ArrowRight"?(d.preventDefault(),p(e,1)):d.key==="ArrowLeft"?(d.preventDefault(),p(e,-1)):d.key==="Escape"&&(d.preventDefault(),v(e))};e._keyHandler=s,document.addEventListener("keydown",s);let t=e.querySelector("[data-modal-prev]"),a=e.querySelector("[data-modal-next]");t&&t.addEventListener("click",function(d){d.preventDefault(),p(e,-1)}),a&&a.addEventListener("click",function(d){d.preventDefault(),p(e,1)});let o=1,u=e.querySelector("[data-modal-zoom-in]"),l=e.querySelector("[data-modal-zoom-out]"),c=e.querySelector("[data-modal-zoom-reset]");u&&u.addEventListener("click",function(d){d.preventDefault(),o=Math.min(o+.1,3),i()}),l&&l.addEventListener("click",function(d){d.preventDefault(),o=Math.max(o-.1,.5),i()}),c&&c.addEventListener("click",function(d){d.preventDefault(),o=1,i()}),i(),e.querySelectorAll("img").forEach(d=>{try{d.style.transition="opacity 200ms ease",d.complete||(d.style.opacity="0"),d.addEventListener("load",function(){d.style.opacity="1"}),d.complete&&requestAnimationFrame(()=>{d.style.opacity="1"})}catch{}})}catch{}}function v(e){e.classList.add("hidden"),e.classList.remove("flex"),document.body.classList.remove("overflow-hidden");try{e._keyHandler&&(document.removeEventListener("keydown",e._keyHandler),delete e._keyHandler)}catch{}}document.addEventListener("click",e=>{let n=e.target.closest("[data-modal-open]");if(n){e.preventDefault();let o=n.getAttribute("data-modal-open"),i=document.getElementById(o);i&&q(i);return}let r=e.target.closest("[data-modal-close]");if(r){e.preventDefault();let o=r.closest("[data-modal]");o&&v(o);return}let s=e.target.closest("[data-modal]");if(s&&(e.target===s||e.target.closest("[data-modal-overlay]"))){v(s);return}let t=e.target.closest("[data-copy]");if(t){e.preventDefault();let o=t.getAttribute("data-copy");if(o){if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(o).catch(()=>{});else{let i=document.createElement("textarea");i.value=o,document.body.appendChild(i),i.select();try{document.execCommand("copy")}catch{}document.body.removeChild(i)}t.classList.add("ring-1","ring-emerald-300"),setTimeout(()=>t.classList.remove("ring-1","ring-emerald-300"),500)}return}let a=e.target.closest("[data-toggle]");if(a){e.preventDefault(),e.stopImmediatePropagation();let o=a.getAttribute("data-toggle"),i=document.getElementById(o);if(!i){console.warn("Toggle target not found:",o);return}if(!i.classList.contains("hidden")){x(i),y(o,!1),a.setAttribute("aria-expanded","false");let l=a.querySelector("svg");l&&(l.style.transform="rotate(0deg)");let c=a.closest(".group");if(c){c.classList.remove("ring-1","ring-blue-300/40","shadow-md","md:p-7"),c.style.transform="",c.style.zIndex="",c._hoverRemoved&&(c.classList.add("hover:-translate-y-1"),c._hoverRemoved=!1);let m=c.querySelector("[data-ribbon]");m&&m.classList.remove("hidden");let d=c.querySelector("[data-status-chip]");d&&d.classList.remove("hidden")}}else{A(o),C(i),y(o,!0),a.setAttribute("aria-expanded","true");let l=a.querySelector("svg");l&&(l.style.transform="rotate(180deg)");let c=a.closest(".group");if(c){c.classList.add("ring-1","ring-blue-300/40","shadow-md");try{c._hoverRemoved=c.classList.contains("hover:-translate-y-1"),c.classList.remove("hover:-translate-y-1")}catch{}let m=c.querySelector("[data-ribbon]");m&&m.classList.add("hidden");let d=c.querySelector("[data-status-chip]");d&&d.classList.add("hidden")}}return}}),document.addEventListener("submit",function(e){let n=e.target.closest("form");if(!n)return;let r=n.getAttribute("action")||"";if(!/artist-applications\/.+\/(approve|reject)\//.test(r))return;e.preventDefault();let s=/approve\//.test(r),t=n.closest("[data-card-overlay]")||document.body;S(t,s?"Approve this application?":"Reject this application?").then(function(a){if(!a)return;let o=n.querySelector("button");o&&(o.disabled=!0,o.classList.add("opacity-60"),o.textContent=s?"Approving\u2026":"Rejecting\u2026");let i=n.querySelector('input[name="csrfmiddlewaretoken"]')?.value||document.querySelector('input[name="csrfmiddlewaretoken"]')?.value||"";return fetch(r,{method:"POST",headers:{"X-CSRFToken":i,"X-Requested-With":"XMLHttpRequest"},body:new FormData(n)}).then(function(u){if(u.ok)return u.text();throw new Error("Request failed")}).then(function(){let u=n.closest(".group");if(!u)return;let l=u.querySelector("[data-details-actions] .flex");l&&(l.innerHTML=`<span class="inline-flex items-center px-3 py-1.5 rounded-lg text-sm font-semibold ${s?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border-red-200"}">${s?"Approved":"Rejected"}</span>`);let c=u.querySelector("[data-status-chip]");c&&c.classList.add("hidden");let m=u.querySelector("[data-ribbon]");m&&(m.innerHTML=`<span class="inline-flex items-center px-10 py-2 rounded-md text-base font-semibold ${s?"bg-green-500/90":"bg-red-600/90"} text-white shadow-lg">${s?"Approved":"Rejected"}</span>`);let d=n.closest("[data-card-overlay]")||document.body;L(s?"APPROVED":"REJECTED",s?"success":"error",d)}).catch(function(){let u=n.closest("[data-card-overlay]")||document.body;L("Action failed. Please refresh and try again.","error",u)}).finally(function(){o&&(o.disabled=!1,o.classList.remove("opacity-60"),o.textContent=s?"Approve":"Reject")})})});let k=document.getElementById("apps-tabs-bar");if(k){let e=()=>{let n=window.scrollY>0;k.classList.toggle("shadow-sm",n)};window.addEventListener("scroll",e,{passive:!0}),e()}let b=document.getElementById("appsRefresh");b&&b.addEventListener("click",()=>{let e=b.querySelector("[data-spinner]");e&&e.classList.remove("hidden")});function w(){try{let a=function(i,u){let l=document.createElement("span");return l.className="inline-flex items-center gap-1 text-xs font-medium px-2.5 py-1 rounded-full "+u,l.textContent=i,l};var e=a;let n=document.getElementById("apps-summary"),r=document.getElementById("apps-grid");if(!n||!r)return;let s=Array.prototype.slice.call(r.querySelectorAll(".group")),t={total:0,pending:0,under_review:0,processing:0,approved:0,rejected:0};s.forEach(i=>{let u=i.querySelector("span.rounded-full");if(t.total+=1,!u)return;let l=(u.textContent||"").trim().toLowerCase();l.includes("approved")?t.approved+=1:l.includes("rejected")?t.rejected+=1:l.includes("under review")?t.under_review+=1:l.includes("processing")?t.processing+=1:l.includes("pending")&&(t.pending+=1)});let o=document.createDocumentFragment();o.appendChild(a(`Total: ${t.total}`,"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300")),o.appendChild(a(`Pending: ${t.pending}`,"bg-amber-50 text-amber-700 dark:bg-amber-900/20 dark:text-amber-300")),o.appendChild(a(`Under Review: ${t.under_review}`,"bg-violet-50 text-violet-700 dark:bg-violet-900/20 dark:text-violet-300")),o.appendChild(a(`Processing: ${t.processing}`,"bg-cyan-50 text-cyan-700 dark:bg-cyan-900/20 dark:text-cyan-300")),o.appendChild(a(`Approved: ${t.approved}`,"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-300")),o.appendChild(a(`Rejected: ${t.rejected}`,"bg-red-50 text-red-700 dark:bg-red-900/20 dark:text-red-300")),n.innerHTML="",n.appendChild(o)}catch{}}function E(){try{let e=document.getElementById("apps-grid");if(!e||e.getAttribute("data-skeleton-done")==="1")return;let n=document.createElement("div");n.id="apps-skeleton",n.className=e.className;let r=Math.min(6,Math.max(3,Math.ceil(window.innerWidth/320))),s=document.createDocumentFragment();for(let t=0;t<r;t++){let a=document.createElement("div");a.className="rounded-2xl border border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 p-4 shadow-sm animate-pulse h-[180px]",a.innerHTML=`
          <div class="flex items-start gap-3">
            <div class="h-10 w-10 rounded-full bg-gray-200 dark:bg-gray-700"></div>
            <div class="flex-1 space-y-2">
              <div class="h-4 w-40 bg-gray-200 dark:bg-gray-700 rounded"></div>
              <div class="h-3 w-28 bg-gray-200 dark:bg-gray-700 rounded"></div>
            </div>
          </div>
          <div class="mt-4 grid grid-cols-3 gap-2">
            <div class="h-7 bg-gray-200 dark:bg-gray-700 rounded"></div>
            <div class="h-7 bg-gray-200 dark:bg-gray-700 rounded"></div>
            <div class="h-7 bg-gray-200 dark:bg-gray-700 rounded"></div>
          </div>`,s.appendChild(a)}e.style.opacity="0",e.parentElement.insertBefore(n,e),setTimeout(()=>{try{let t=document.getElementById("apps-skeleton");t&&t.remove(),e.style.transition="opacity 220ms ease",e.style.opacity="1",e.setAttribute("data-skeleton-done","1")}catch{}},240)}catch{}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){E(),w()}):(E(),w())})();})();
//# sourceMappingURL=dashboard_artist_applications.js.map
